<template>  <article>    <header class="tab-wrapper">      <tab active-color="#5077AA">        <tab-item v-for="(item,index) in tabMenu"                  :selected="currentTab === index"                  :key="index" @on-item-click="toggleTab(index)">{{item}}        </tab-item>      </tab>    </header>    <div style="padding-top: 2.6rem" class="list1" v-show="currentTab==0">    <scroller :pullup-config="Interface.scrollerUp"              @on-pullup-loading="refreshList1"              lock-x              use-pullup              height="-40"              v-model="scrollerStatus"              scrollbarY bounce ref="scrollerBottom1">      <div class="list-wrapper">        <div>          <p v-show="(!suspiciousPerson||suspiciousPerson.length === 0) "class="no-data">暂无数据</p>          <div v-for="(item,index) in suspiciousPerson" class="suspiciousList" >            <div class="suspiciousCon" @click="suspiciousHandel(item.illegal_guest_id)">              <div class="timeLine">                <span>{{datetimeparse(item.filming_time,'YYYYMMDD')}}</span>              </div>              <div class="suspiciousItem">                <img width="80" height="80" :src="item.facial_pic" alt="无人脸图" class="suspiciousImg">                <div class="txt1">相似度：{{item.similarity}}</div>                <div class="txt2">{{datetimeparse(item.filming_time,'hhmm')}}</div>              </div>            </div>          </div>        </div>      </div>    </scroller>    </div>    <div style="padding-top: 2.6rem" class="list2" v-show="currentTab==1">      <scroller :pullup-config="Interface.scrollerUp"                @on-pullup-loading="refreshList1"                lock-x                use-pullup                height="-40"                v-model="scrollerStatus"                scrollbarY bounce ref="scrollerBottom2">        <div class="list-wrapper">          <div>            <p v-show="(!handledPerson||handledPerson.length === 0) "class="no-data">暂无数据</p>            <div v-for="(item,index) in handledPerson" class="suspiciousList" >              <div class="suspiciousCon" @click="suspiciousHandel(item.illegal_guest_id)">                <div class="timeLine">                  <span>{{datetimeparse(item.filming_time,'YYYYMMDD')}}</span>                </div>                <div class="suspiciousItem">                  <img width="80" height="80" :src="item.facial_pic" alt="无人脸图" class="suspiciousImg">                  <div class="txt1">相似度：{{item.similarity}}</div>                  <div class="txt2">{{datetimeparse(item.filming_time,'hhmm')}}</div>                </div>              </div>            </div>          </div>        </div>      </scroller>    </div>  </article></template><script>    import {mapState, mapGetters, mapActions, mapMutations} from 'vuex';    import {Tab, TabItem,Scroller} from 'vux'    module.exports = {        name:'suspicious',        data(){          components: {Scroller,Tab, TabItem}          return{              suspiciousPerson:[],              handledPerson:[],              scrollerStatus: {                  pullupStatus: 'default',                  pulldownStatus: 'default'              },              onFetching0:false,              onFetching1:false,              offset0:0,              offset1:0,              total0:0,              total1:0          }        },        computed: {            ...mapState ([                'route',                'Interface'            ]),            currentTab(){                // return parseInt(this.route.params.tab)                return 0            },            tabMenu() {                // this.initList();                let menu = [];                menu[0] = `可疑人员(${this.total0})`;                menu[1] = `已处理(${this.total1})`;                return menu;            },            // suspiciousList(){            //     return this.suspiciousPerson;            // },        },        methods:{            ...mapActions([                'replaceto',                'goto',                'getSuspicious'            ]),            toggleTab(index){            },            //可疑人员详情页            suspiciousHandel(suspiciousId){                this.goto('/suspicious/susDetail/'+suspiciousId)            },            getSuspiciousList(){                this.getSuspicious({                    offset:this.offset0,                    limit:15,                    data:{                        createTimeStart:'',                        createTimeEnd:'',                        statuses:['NONE']                    },                    onsuccess: (body,headers)=>{                        this.total0=headers.get('x-total-count');                        this.suspiciousPerson=[...this.suspiciousPerson,...body.data];                        this.scrollerStatus.pullupStatus = 'default';                    }                });                this.getSuspicious({                    offset:this.offset1,                    limit:15,                    data:{                        createTimeStart:'',                        createTimeEnd:'',                        statuses:['READ']                    },                    onsuccess: (body,headers)=>{                        this.total1=headers.get('x-total-count');                        this.handledPerson=[...this.handledPerson,...body.data];                        this.scrollerStatus.pullupStatus = 'default';                    }                });            },            refreshList0(){                let off=this.total0-this.offset0;                if (this.onFetching1||off<=15) {                    // do nothing                    return;                }else{                    this.onFetching0 = true;                    setTimeout(() => {                        this.offset0=this.offset0+15;                        console.log('第'+this.offset0+'起');                        this.getSuspiciousList();                        //$nextTick是为了数据改变了等待dom渲染后使用                        this.$nextTick(() => {                            this.$refs.scrollerBottom0.reset();                        });                        this.onFetching0 = false                    }, 500);                }            },            refreshList1(){                let off=this.total1-this.offset1;                if (this.onFetching1||off<=15) {                    // do nothing                    return;                }else{                    this.onFetching0 = true;                    setTimeout(() => {                        this.offset0=this.offset0+15;                        console.log('第'+this.offset0+'起');                        this.getSuspiciousList();                        //$nextTick是为了数据改变了等待dom渲染后使用                        this.$nextTick(() => {                            this.$refs.scrollerBottom0.reset();                        });                        this.onFetching0 = false                    }, 500);                }            }        },        mounted(){            this.getSuspiciousList();        }    }</script><style lang="less" scoped>  @import "index.less";  .list-wrapper{    position: relative;    padding-top: 0;  }</style>