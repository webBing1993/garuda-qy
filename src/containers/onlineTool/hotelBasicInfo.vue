<template>  <div class="hotelBasicInfo">    <group gutter="0">      <x-input title="酒店名字" v-model="hotelName" placeholder='请输入酒店名称' placeholder-align="right" text-align="right" :readonly="!btnFlag" ></x-input>      <!--<selector title="地区" v-model="area":options="arealist" direction="rtl" placeholder='请选择选择地区' placeholder-align="right" text-align="right" :readonly="!btnFlag"></selector>-->      <x-input title="地区" v-model="area" placeholder='请输入地区' placeholder-align="right" text-align="right" :readonly="!btnFlag"></x-input>      <x-input title="地址" v-model="address" placeholder='请输入地址' placeholder-align="right" text-align="right" :readonly="!btnFlag"></x-input>      <x-input title="电话" v-model="tel" placeholder='请输入前台电话' placeholder-align="right" text-align="right" :readonly="!btnFlag"></x-input>      <x-input title="旅业ID" v-model="lvId" placeholder='请输入旅业ID' placeholder-align="right" text-align="right" :readonly="!btnFlag"></x-input>      <x-switch title="无证入住" v-model="undocumentedCheck" :disabled="!btnFlag"></x-switch>    </group>    <h3 style="color: #e51324;text-align: center;margin-top: 1rem">{{tips}}</h3>    <div class="bottonGroup">      <span class="rightBtn" @click="conFirmOrEdit">{{btnFlag?'确定':'编辑'}}</span>    </div>    <Dialog confirm cancel v-model="backCheckFlag" @onConfirm="backCheckDialog"  confirm cancel>      <p style="color: #000000;font-size: 14px"> <br> 消息未保存，是否确认返回</p>    </Dialog>  </div></template><script>    import { XInput,XSwitch,Selector,Group } from 'vux'    import { mapActions,mapState,mapMutations }from 'vuex'    export default {        components: {            XInput,            XSwitch,            Selector,            Group        },        data(){            return{                // arealist:[{key: 'gd', value: '广东'}, {key: 'gx', value: '广西'}],                // btnFlag:true,                hotelName:"" ,//酒店名称                area:"", //    地区                address:"", // 地址                tel:"", //  联系电话                lvId:"", // 旅业ID                undocumentedCheck:false, // 无证入住,                btnFlag:true,                backCheckFlag:false,                tips:''            }        },        computed:{            ...mapState([                'searchHotelId'            ])        },        watch: {            searchHotelId (val) {                if (val == '') {                    this.btnFlag = true                } else {                    this.btnFlag = false                }                if (val !== '') {                    this.modifyHotelInfo ({                        hotelId: this.searchHotelId,                        onsuccess: body => {                            this.hotelName = body.data.hotelName ,//酒店名称                                this.area = body.data.area, //    地区                                this.address = body.data.address, // 地址                                this.tel = body.data.tel, //  联系电话                                this.lvId = body.data.lvyeId, // 旅业ID                                this.undocumentedCheck = body.data.undocumentedCheck=='true'?true:false// 无证入住,                        }                    });                }                console.log ('btnFlag:', this.btnFlag)            },        },        methods:{            ...mapActions([                'addHotelInfo',                'updateHotelInfo',                'modifyHotelInfo',                'goto',                'replaceto'            ]),            ...mapMutations([                'SEARCHHOTELID'            ]),            backCheckDialog(){                let _this=this;                // window.removeEventListener("popstate",_this.callback, false)                this.replaceto('/onlineTool/onlineDetail')            },            setTip(){                if(this.lvId==''){                    this.tips='旅业ID不能为空 ！'                    return false;                }else if(this.hotelName==''||this.area==''||this.address==''||this.tel==''){                    this.tips='酒店信息都不能为空 ！'                    return false;                }else {                    this.tips=''                    return true                }            },            conFirmOrEdit(){                if(!this.btnFlag){                    this.btnFlag=!this.btnFlag                }else {                    if(this.searchHotelId!==''){                        if(this.setTip()){                            this.updateHotelInfo({                                data:{                                    "hotelId":this.searchHotelId,                                    "hotelName":this.hotelName, //酒店名称                                    "area":this.area, //    地区                                    "address":this.address, // 地址                                    "tel":this.tel, //  联系电话                                    "lvyeId":this.lvId, // 旅业ID                                    "undocumentedCheck":this.undocumentedCheck.toString(),                                },                                onsuccess:body=>{                                    this.SEARCHHOTELID(this.searchHotelId)                                    this.goto('/onlineTool/onlineDetail')                                }                            })                        }                    }else {                        if(this.setTip()){                            this.addHotelInfo({                                data:{                                    "hotelName":this.hotelName, //酒店名称                                    "area":this.area, //    地区                                    "address":this.address, // 地址                                    "tel":this.tel, //  联系电话                                    "lvyeId":this.lvId, // 旅业ID                                    "undocumentedCheck":this.undocumentedCheck,                                },                                onsuccess:body => {                                    this.SEARCHHOTELID(body.data)                                    this.goto('/onlineTool/onlineDetail')                                }                            })                        }                    }                }            },            pushHistory() {                let state = {                    title: "title",                    url: "#"                };                window.history.pushState(state, "title", "#");            },            flag(){                this.backCheckFlag=true;            },            callback(){                console.log(7777)                this.flag()            }        },        mounted() {            // this.pushHistory();            // var _this=this;            // window.addEventListener("popstate", _this.callback, false);            if (this.searchHotelId){                this.modifyHotelInfo({                    hotelId:this.searchHotelId,                    onsuccess:body=>{                        console.log()                        this.hotelName=body.data.hotelName ,//酒店名称                            this.area=body.data.area, //    地区                            this.address=body.data.address, // 地址                            this.tel=body.data.tel, //  联系电话                            this.lvId=body.data.lvyeId, // 旅业ID                            this.undocumentedCheck=body.data.undocumentedCheck=='true'?true:false// 无证入住,                    }                });            };            if (this.searchHotelId == '') {                this.btnFlag = true            } else {                this.btnFlag = false            }            console.log('btnFlag:',this.btnFlag)        }    }</script><style lang="less" scoped>  @import './index.less';</style>