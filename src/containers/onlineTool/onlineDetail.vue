<template>  <div class="onlineDetail">    <group gutter="0">      <cell  :title=detail.hotelName   is-link  @click.native='editHotelInfo(detail.hotelId)' value="查看酒店基本信息"></cell>    </group>    <div class="synchBtn"  @click="synchHotelRoomNum">      <p>同步酒店房号</p>      <h5>上次同步时间：{{datetimeparse(detail.updateroomTime,'YYMMDDhhmmss')}}</h5>    </div>    <div class="detailPeople" >      <div class="title">人员</div>      <div class="cellBox"v-for="(item,index) in peopleList">        <i class="iconfont icon-shanchu-yuan-tianchong" @click="delPeople(item,index)"></i>        <input type="text" v-on:input='changeInput(item)'  class="input1" v-model="item.userName" height="1.5rem" placeholder="请输入名字" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off">        <input type="text" v-on:input='changeInput(item)' min=3 maxlength=11 v-model="item.mobilePhone" align="right" height="1.5rem" pattern="[0-9]" placeholder="请输入手机号码" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off">        <!--<i class="iconfont" :class="{'icon-roundcheckfill':item.checked}"></i>-->        <span class="button" @click="addConfirm(item)" v-if="item.checked">确定</span>      </div>      <div class="cellBox" @click="addPeople">        <i slot="icon"  class="iconfont icon-zengjia-yuan-tianchong"></i>        <span>添加成员</span>      </div>    </div>    <div class="deviceGroup">      <group title="设备">        <cell :title=item.deviceName :value="item.deviceId" v-for="(item,index) in deviceList" :key="index">          <i slot="icon"  class="iconfont icon-shanchu-yuan-tianchong" @click="delDevice(item,index)"></i>        </cell>        <cell title="添加设备" link='/onlineTool/onlineDevice'>          <i slot="icon"  class="iconfont icon-zengjia-yuan-tianchong"></i>        </cell>      </group>    </div>    <div class="bottonGroup" @click="back">返回列表</div>    <Dialog confirm cancel v-model="checkFlag" @onConfirm="CheckDialog"  confirm cancel>      <p style="color: #000000;font-size: 14px"> <br> 是否确认添加</p>    </Dialog>    <Dialog confirm cancel v-model="peopleDelFlag" @onConfirm="delPeopleHandel"  confirm cancel>      <p style="color: #000000;font-size: 14px"> <br> 确认删除该成员？</p>    </Dialog>    <Dialog confirm cancel v-model="deviceDelFlag" @onConfirm="delDeviceHandel"  confirm cancel>      <p style="color: #000000;font-size: 14px"> <br> 确认删除该设备？</p>    </Dialog>    <Dialog confirm cancel v-model="modifyFlag" @onConfirm="CheckDialog"  confirm cancel>      <p style="color: #000000;font-size: 14px"> <br> 确认修改？</p>    </Dialog>  </div></template><script>  import {mapActions,mapState,mapMutations} from 'vuex'  import {Cell,Group,XInput} from 'vux'  export default {      components:{          Cell,          Group,          XInput      },      data(){          return{              peopleList:[],              deviceList:[],              detail:{},              checkFlag:false,              itemCheck:{},              peopleDelFlag:false,              deviceDelFlag:false,              delItem:{},              delIndex:0,              modifyFlag:false          }      },      computed:{          ...mapState([              'searchHotelId'          ])      },      watch:{          // searchHotelId(){          //     this.getHotelDetail();          // }      },      methods:{          ...mapActions([              'goto',              'searchHotelDetail',              'addHotelMember',              'delPeoples',              'delDevices',              'synchHotelRoomNums',              'replaceto',              'updateHotelMember'          ]),          ...mapMutations([              'SEARCHHOTELID'          ]),          back(){              this.replaceto('/onlineTool/onlineList')          },          CheckDialog(){              if(this.itemCheck.id!==''){                      this.updateHotelMember ({                          data: {                              "id":this.itemCheck.id,                              "hotelId": this.searchHotelId,//酒店id                              "userName": this.itemCheck.userName, // 酒店人员                              "mobilePhone": this.itemCheck.mobilePhone, //手机                          },                          onsuccess: (body) => {                              this.itemCheck.checked=false;                          }                      })              }else {                      this.addHotelMember ({                          data: {                              "hotelId": this.searchHotelId,//酒店id                              "userName": this.itemCheck.userName, // 酒店人员                              "mobilePhone": this.itemCheck.mobilePhone, //手机                          },                          onsuccess: (body) => {                              this.itemCheck.checked = false;                              this.itemCheck.id = body.data                          }                      })              }          },          addConfirm(item){              console.log(item)              if(item.userName!==''&&item.mobilePhone!==''){                  // if(this.userName!==item.userName||this.mobilePhone!==item.mobilePhone){                  //                  // }                  this.checkFlag=true;                  this.itemCheck=item;              }          },          changeInput(item){              console.log('改变值')              this.peopleList.forEach((i,index)=>{                  if(typeof i.checked == 'undefined'){                      this.$set(i,'checked',false);                  }              });              if(item.userName!==''&&item.mobilePhone!==''){                  item.checked=true;              }else {                  item.checked=false;              }          },          addPeople(){              this.peopleList.push({userName:'',mobilePhone:'',id:'',checked:false})          },          delPeople(item,index){              if(!item.id){                  this.peopleList.splice(index,1);              }else if(item.id!==''){                  this.peopleDelFlag=true;                  this.delItem=item;                  this.delIndex=index;              }          },          delDevice(item,index){              if(!item.deviceId){                  this.deviceList.splice(index,1);              }else if(item.deviceId!==''){                  this.deviceDelFlag=true;                  this.delItem=item;                  this.delIndex=index;              }          },          delPeopleHandel(){              this.peopleList.splice(this.delIndex,1)              this.delPeoples({peopleId:this.delItem.id})          },          delDeviceHandel(){              this.deviceList.splice(this.delIndex,1)              this.delDevices({deviceId:this.delItem.deviceId})          },          editHotelInfo(id){              this.SEARCHHOTELID(id);              this.goto("/onlineTool/hotelBasicInfo");          },          getHotelDetail(){              this.searchHotelDetail({                  hotelId:this.searchHotelId,                  onsuccess:(body)=>{                      this.detail=body.data;                      this.peopleList=this.detail.operatorVos;                      this.deviceList=this.detail.deviceVos                  }              })          },          synchHotelRoomNum(){              this.synchHotelRoomNums({                  hotelId:this.searchHotelId,                  data:{                      lvyeId:this.detail.lvyeId                  },                  onsuccess:(body)=>{                    this.detail.updateroomTime=body.data;                    console.log(this.detail.updateroomTime)                  }              })          }      },      mounted(){          this.getHotelDetail()       }  }</script><style lang="less" scoped>  @import "index.less"; .icon-shanchu-yuan-tianchong{   margin-right: 1rem;   color: #e51324; }  .icon-zengjia-yuan-tianchong{    margin-right: 1rem;    color: #40c50f;  }  .icon-roundcheckfill{    color: #1fa5ff;  }</style>